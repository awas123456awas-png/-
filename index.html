<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”¥ Sba3 Fwazer Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #e84118; --dark: #1e1e2f; --success: #27ae60; --wrong: #c23616; }
        body { font-family: 'Tajawal', sans-serif; background: #0a0a12; color: white; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: #1e1e2f; padding: 30px; border-radius: 20px; width: 90%; max-width: 450px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        
        button { padding: 15px 25px; margin: 10px; border-radius: 10px; border: none; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.3s; color: white; }
        .btn-main { background: var(--primary); width: 80%; }
        .btn-level { background: #353b48; width: 30%; }
        button:hover { transform: scale(1.05); filter: brightness(1.2); }
        
        .answerBtn { display: block; width: 100%; margin: 10px 0; background: #2f3640; }
        .correct { background: var(--success) !important; }
        .wrong { background: var(--wrong) !important; }

        #gameArea, #levelScreen, #resultScreen { display: none; }
        #timer { font-size: 40px; color: var(--primary); margin: 15px 0; }
    </style>
</head>
<body>

<div class="card">
    <div id="startScreen">
        <h1>ðŸ”¥ Sba3 Fwazer</h1>
        <p>Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø©: <span id="highScoreText">0</span></p>
        <button class="btn-main" onclick="showLevelScreen()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ</button>
    </div>

    <div id="levelScreen">
        <h3>Ø§Ø®ØªØ± Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø©</h3>
        <button class="btn-level" onclick="selectLevel('easy')">Ø³Ù‡Ù„</button>
        <button class="btn-level" onclick="selectLevel('medium')">ÙˆØ³Ø·</button>
        <button class="btn-level" onclick="selectLevel('hard')">ØµØ¹Ø¨</button>
    </div>

    <div id="gameArea">
        <div id="timer">20</div>
        <h3 id="question">Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‡Ù†Ø§</h3>
        <div id="answers"></div>
    </div>

    <div id="resultScreen">
        <h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>
        <p style="font-size: 24px;">Ù†ØªÙŠØ¬ØªÙƒ: <span id="finalScore">0</span></p>
        <button class="btn-main" onclick="location.reload()">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>
</div>

<script>
    const data = {
        easy: [{ q: "Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©ØŸ", options: ["Ø§Ù„Ø±ÙŠØ§Ø¶", "Ø¬Ø¯Ø©", "Ù…ÙƒØ©"], a: "Ø§Ù„Ø±ÙŠØ§Ø¶" }],
        medium: [{ q: "Ø¹Ø¯Ø¯ ÙƒÙˆØ§ÙƒØ¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø´Ù…Ø³ÙŠØ©ØŸ", options: ["7", "8", "9"], a: "8" }],
        hard: [{ q: "Ù…Ù† Ù…Ø®ØªØ±Ø¹ Ø§Ù„Ù…ØµØ¨Ø§Ø­ØŸ", options: ["Ø£Ø¯ÙŠØ³ÙˆÙ†", "ØªØ³Ù„Ø§", "Ù†ÙŠÙˆØªÙ†"], a: "Ø£Ø¯ÙŠØ³ÙˆÙ†" }]
    };

    let score = 0, timeLeft, timer, currentLevel, currentIdx;

    // ØªØ­Ù…ÙŠÙ„ Ø£Ø¹Ù„Ù‰ Ù†ØªÙŠØ¬Ø© Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­
    document.getElementById("highScoreText").innerText = localStorage.getItem("highScore") || 0;

    function showLevelScreen() {
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("levelScreen").style.display = "block";
    }

    function selectLevel(lvl) {
        currentLevel = lvl;
        currentIdx = 0;
        document.getElementById("levelScreen").style.display = "none";
        document.getElementById("gameArea").style.display = "block";
        loadQuestion();
    }

    function loadQuestion() {
        if(currentIdx >= data[currentLevel].length) return endGame();
        
        timeLeft = 20;
        document.getElementById("timer").innerText = timeLeft;
        const qObj = data[currentLevel][currentIdx];
        document.getElementById("question").innerText = qObj.q;
        
        let html = "";
        qObj.options.forEach(opt => {
            html += `<button class="answerBtn" onclick="check('${opt}', this)">${opt}</button>`;
        });
        document.getElementById("answers").innerHTML = html;
        
        timer = setInterval(() => {
            timeLeft--;
            document.getElementById("timer").innerText = timeLeft;
            if(timeLeft <= 0) endGame();
        }, 1000);
    }

    function check(ans, btn) {
        clearInterval(timer);
        if(ans === data[currentLevel][currentIdx].a) {
            btn.classList.add('correct');
            score += 10;
        } else {
            btn.classList.add('wrong');
        }
        setTimeout(() => { currentIdx++; loadQuestion(); }, 1000);
    }

    function endGame() {
        clearInterval(timer);
        document.getElementById("gameArea").style.display = "none";
        document.getElementById("resultScreen").style.display = "block";
        document.getElementById("finalScore").innerText = score;
        
        // Ø­ÙØ¸ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø£Ø¹Ù„Ù‰
        let high = localStorage.getItem("highScore") || 0;
        if(score > high) localStorage.setItem("highScore", score);
    }
</script>

</body>
</html>
